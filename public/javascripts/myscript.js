var MAIL_VALID_REX=/^([\w-]+(?:\.[\w-]+)*)@((?:[\w-]+\.)*\w[\w-]{0,66})\.([a-z]{2,6}(?:\.[a-z]{2})?)$/;var CUISINE=["Japanese","Thai","Chinese","Korean","Italian","French","VietNamese","Indian","FastFood","Others"];$("#signupform").submit(function(c){c.preventDefault();var b=this;var a=true;if(MAIL_VALID_REX.test($("#input-email").val())==true){$("#email-helper").text("");a=true&&a}else{$("#email-helper").text("Invalid Email Address");a=false}if($("#password1").val().length>=5&&$("#password1").val().length<=12){$("#pass1-helper").text("");a=true&&a}else{$("#pass1-helper").text("Your password should be between 5 and 12 characters in length.");a=false}if($("#password1").val()==$("#password2").val()){$("#pass2-helper").text("");a=true&&a}else{$("#pass2-helper").text("Your comfirm password does not match");a=false}if($("#signupform input:checkbox:checked").length>0){$("#checkbox-helper").text("");a=true&&a}else{$("#checkbox-helper").text("Please select at least a cuisine.");a=false}if($("#user-radio").is(":checked")){if($("#input-user-name").val().length>=5&&$("#input-user-name").val().length<=25){$("#name-helper").text("");a=true&&a}else{a=false;$("#name-helper").text("Your display name should be between 5 and 25 characters in length.")}if($("#input-age").val().length>0&&!isNaN($("#input-age").val())){$("#age-helper").text("");a=true&&a}else{a=false;$("#age-helper").text("Age must be a number and cannot be empty.")}}if($("#rest-radio").is(":checked")){if($("#input-res-name").val().length>=5&&$("#input-res-name").val().length<=25){$("#res-name-helper").text("");a=true&&a}else{a=false;$("#res-name-helper").text("The restaurant name should be between 5 and 25 characters in length.")}if($("#input-location").val().length>=5&&$("#input-location").val().length<=30){$("#location-helper").text("");a=true&&a}else{$("#location-helper").text("The restaurant address should be between 5 and 30 characters.");a=false}}if(a==true){b.submit()}});$("#user-update-prof-btn").click(function(){var e=$("#user-age-update").val();var b=$("#user-name-update").val();var a=[];$("#user-profile-success").text("");$("#user-profile-fail").text("");for(var c=0;c<CUISINE.length;c++){if($("#c"+c).is(":checked")){a.push(CUISINE[c])}}var d=true;if($("#user-update-form input:checkbox:checked").length>0){$("#user-checkbox-edit-helper").text("");d=true&&d}else{$("#user-checkbox-edit-helper").text("Please select at least a cuisine.");d=false}if($("#user-name-update").val().length>=5&&$("#user-name-update").val().length<=25){$("#user-name-edit-helper").text("");d=true&&d}else{d=false;$("#user-name-edit-helper").text("User name should be between 5 and 25 characters in length.")}if($("#user-age-update").val().length>0&&!isNaN($("#user-age-update").val())){$("#user-age-edit-helper").text("");d=true&&d}else{d=false;$("#user-age-edit-helper").text("Age cannot be empty and must be a number")}if(d){$.ajax({url:$("#user-update-form").attr("action"),method:"put",data:{age:e,name:b,cuisine:a},success:function(f){if(f=="success"){$("#user-profile-success").text("Sucessfully update the user profile.");setTimeout(function(){$("#user-profile-success").text("")},2000)}else{$("#user-profile-fail").text("Fail to update the user profile.");setTimeout(function(){$("#user-profile-fail").text("")},2000)}}})}});$("#rest-update-prof-btn").click(function(){var e=$("#rest-loc-update").val();var b=$("#rest-name-update").val();var a=[];$("#rest-profile-success").text("");$("#rest-profile-fail").text("");for(var c=0;c<CUISINE.length;c++){if($("#r"+c).is(":checked")){a.push(CUISINE[c])}}var d=true;if($("#rest-update-form input:checkbox:checked").length>0){$("#rest-checkbox-edit-helper").text("");d=true&&d}else{$("#rest-checkbox-edit-helper").text("Please select at least a cuisine.");d=false}if($("#rest-name-update").val().length>=5&&$("#rest-name-update").val().length<=25){$("#rest-name-edit-helper").text("");d=true&&d}else{d=false;$("#rest-name-edit-helper").text("The restaurant name should be between 5 and 25 characters in length.")}if($("#rest-loc-update").val().length>=5&&$("#rest-loc-update").val().length<=30){$("#rest-loc-edit-helper").text("");d=true&&d}else{$("#rest-loc-edit-helper").text("The restaurant address should be between 5 and 30 characters.");d=false}if(d){$.ajax({url:$("#rest-update-form").attr("action"),method:"put",data:{location:e,name:b,cuisine:a},success:function(f){if(f=="success"){$("#rest-profile-success").text("Sucessfully update the restaurants profile.");setTimeout(function(){$("#rest-profile-success").text("")},2000)}else{$("#rest-profile-fail").text("Fail to update the restaurant profile.");setTimeout(function(){$("#rest-profile-fail").text("")},2000)}}})}});$("#user-update-pass-btn").click(function(){var c=$("#user-edit-old-pass").val();var d=$("#user-edit-new-pass").val();var a=$("#user-edit-confirm-pass").val();var b=true;$("#user-old-pass-helper").text("");$("#user-pass-success").text("");$("#user-pass-fail").text("");if(d.length>=5&&d.length<=12){$("#user-new-pass-helper").text("");b=true&&b}else{$("#user-new-pass-helper").text("Your password should be between 5 and 12 characters.");b=false}if(d==a){$("#user-confirm-pass-helper").text("");b=true&&b}else{$("#user-confirm-pass-helper").text("Your confirm password does not match");b=false}if(b){$.ajax({url:$("#user-update-pass-form").attr("action"),method:"put",data:{password:c,newPassword:d,confirmPassword:a},success:function(e){if(e=="Invalid Old Password"){$("#user-old-pass-helper").text("Invalid password")}else{if(e=="success"){$("#user-pass-success").text("Successfully update the password");setTimeout(function(){$("#user-pass-success").text("")},2000)}else{$("#user-pass-fail").text("Fail to update the password");setTimeout(function(){$("#user-pass-fail").text("")},2000)}}}})}});$("#rest-update-pass-btn").click(function(){var c=$("#rest-edit-old-pass").val();var d=$("#rest-edit-new-pass").val();var a=$("#rest-edit-confirm-pass").val();var b=true;$("#rest-old-pass-helper").text("");$("#rest-pass-success").text("");$("#rest-pass-fail").text("");if(d.length>=5&&d.length<=12){$("#rest-new-pass-helper").text("");b=true&&b}else{$("#rest-new-pass-helper").text("Your password should be between 5 and 12 characters.");b=false}if(d==a){$("#rest-confirm-pass-helper").text("");b=true&&b}else{$("#rest-confirm-pass-helper").text("Your confirm password does not match");b=false}if(b){$.ajax({url:$("#rest-update-pass-form").attr("action"),method:"put",data:{password:c,newPassword:d,confirmPassword:a},success:function(e){if(e=="Invalid Old Password"){$("#rest-old-pass-helper").text("Invalid password")}else{if(e=="success"){$("#rest-pass-success").text("Successfully update the password");setTimeout(function(){$("#rest-pass-success").text("")},2000)}else{$("#rest-pass-fail").text("Fail to update the password");setTimeout(function(){$("#rest-pass-fail").text("")},2000)}}}})}});$("#user-radio").click(function(){$(".restaurant-section").hide();$(".user-only").show();$(".helper").text("")});$("#rest-radio").click(function(){$(".restaurant-section").show();$(".user-only").hide();$(".helper").text("")});